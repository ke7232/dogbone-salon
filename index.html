<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DogBone å¯µç‰©ç¾å®¹å¥‘ç´„</title>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --main-blue: #a2d2ff; --soft-blue: #e0f2fe; --dark-blue: #0077b6; }
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #f0f9ff; 
            background-image: radial-gradient(#a2d2ff 0.5px, transparent 0.5px);
            background-size: 20px 20px; /* å¯æ„›å°åœ“é»èƒŒæ™¯ */
            margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; 
        }
        .container { 
            max-width: 450px; width: 100%; background: white; padding: 25px; 
            border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
            border: 4px solid var(--main-blue); box-sizing: border-box; 
        }
        header h1 { 
            color: var(--dark-blue); font-family: 'ZCOOL KuaiLe', cursive; 
            font-size: 36px; margin: 0; text-align: center; 
        }
        header p { text-align: center; color: #666; font-size: 14px; margin: 5px 0 20px 0; }
        
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; margin-bottom: 8px; color: var(--dark-blue); font-weight: bold; font-size: 15px; }
        .input-group input { 
            width: 100%; padding: 12px; border: 2px solid var(--soft-blue); 
            border-radius: 15px; box-sizing: border-box; outline: none; 
            font-size: 16px; transition: 0.3s;
        }
        .input-group input:focus { border-color: var(--main-blue); background-color: #fdfeff; }

        .contract-box { 
            height: 100px; overflow-y: scroll; border: 2px solid #f0f0f0; 
            padding: 12px; background: #fafafa; font-size: 13px; 
            border-radius: 15px; margin-bottom: 20px; color: #777; line-height: 1.6; 
        }

        .sig-label { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; color: var(--dark-blue); font-weight: bold; }
        
        .signature-wrapper { 
            width: 100%; height: 200px; background-color: #fff; 
            border: 3px dashed var(--main-blue); border-radius: 20px; 
            margin-bottom: 20px; touch-action: none; position: relative; 
            overflow: hidden;
        }
        .signature-wrapper::after {
            content: "ğŸ¾"; position: absolute; bottom: 10px; right: 10px; 
            font-size: 24px; color: rgba(162, 210, 255, 0.4); pointer-events: none;
        }
        canvas { width: 100%; height: 100%; cursor: crosshair; }

        .btn-group { display: flex; gap: 12px; }
        button { 
            flex: 1; padding: 15px; border: none; border-radius: 50px; 
            font-size: 16px; font-weight: bold; cursor: pointer; 
            transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 5px;
        }
        #clear-btn { background: #f0f0f0; color: #888; }
        #save-btn { background: var(--main-blue); color: white; box-shadow: 0 4px 15px rgba(162, 210, 255, 0.5); }
        #save-btn:active { transform: scale(0.95); }

        .loading-overlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(255,255,255,0.9); z-index: 1000; 
            flex-direction: column; justify-content: center; align-items: center; 
        }
        .spinner { font-size: 50px; animation: bounch 1s infinite; }
        @keyframes bounch { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
    </style>
</head>
<body>

<div id="loading" class="loading-overlay">
    <div class="spinner">ğŸ¦´</div>
    <p style="color: var(--dark-blue); font-weight: bold; font-size: 18px;">æ­£åœ¨æŠŠè³‡æ–™å¼çµ¦è€é—†...</p>
</div>

<div class="container">
    <header>
        <h1>DogBone</h1>
        <p>ğŸ¾ å¯µç‰©ç¾å®¹æœå‹™å®šå‹åŒ–å¥‘ç´„ ğŸ¾</p>
    </header>

    <div class="input-group">
        <label>ğŸ‘¤ ä¸»äººå§“å</label>
        <input type="text" id="owner-name" placeholder="è«‹è¼¸å…¥å§“å">
    </div>
    <div class="input-group">
        <label>ğŸ¶ å¯¶è²åå­—</label>
        <input type="text" id="pet-name" placeholder="å¯¶è²å«ä»€éº¼åå­—å‘¢ï¼Ÿ">
    </div>
    <div class="input-group">
        <label>ğŸ“± è¯çµ¡é›»è©±</label>
        <input type="tel" id="owner-phone" placeholder="å¡«å¯«é›»è©±æ–¹ä¾¿è¯ç¹«">
    </div>

    <div class="contract-box">
        <strong>ã€æº«é¦¨å®åš€ã€‘</strong><br>
        1. æœ¬åº—ä¾è¾²æ¥­éƒ¨è¦ç¯„åŸ·è¡Œç¾å®¹æœå‹™ã€‚<br>
        2. ç°½åä»£è¡¨æ‚¨å·²ç¢ºèªå¯¶è²å¥åº·ç‹€æ³è‰¯å¥½ã€‚<br>
        3. è‹¥æœ‰ç·Šæ€¥é†«ç™‚éœ€æ±‚ï¼Œå°‡é€è‡³æŒ‡å®šé†«é™¢ã€‚<br>
        4. æ›´å¤šè©³ç´°æ¢æ¬¾è«‹åƒé–±å®˜æ–¹å…¬å‘Šç¯„æœ¬ã€‚
    </div>

    <div class="sig-label">
        <span>ğŸ–‹ é»æ“Šä¸‹æ–¹ç©ºç™½è™•ç°½å</span>
    </div>
    <div class="signature-wrapper">
        <canvas id="signature-pad"></canvas>
    </div>

    <div class="btn-group">
        <button id="clear-btn">ğŸ§¹ é‡æ“¦</button>
        <button id="save-btn">ğŸš€ ç¢ºèªé€å‡º</button>
    </div>
</div>

<p style="color: #bbb; font-size: 12px; margin-top: 20px;">Â© 2026 DogBone Grooming</p>

<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbx0AV8k6Qn-i-6uILBE5bcBNg5oymzSDSF8sXux5Su-QqFC7M208uILNeCTAeyvAw6XVQ/exec';
    const canvas = document.getElementById('signature-pad');
    const signaturePad = new SignaturePad(canvas, {
        penColor: 'rgb(0, 0, 0)'
    });

    function resizeCanvas() {
        const ratio = Math.max(window.devicePixelRatio || 1, 1);
        canvas.width = canvas.offsetWidth * ratio;
        canvas.height = canvas.offsetHeight * ratio;
        canvas.getContext("2d").scale(ratio, ratio);
        signaturePad.clear();
    }
    window.addEventListener("resize", resizeCanvas);
    window.addEventListener("orientationchange", resizeCanvas);
    resizeCanvas();

    document.getElementById('clear-btn').addEventListener('click', () => signaturePad.clear());

    document.getElementById('save-btn').addEventListener('click', function() {
        const owner = document.getElementById('owner-name').value;
        const pet = document.getElementById('pet-name').value;
        const phone = document.getElementById('owner-phone').value;

        if (!owner || !pet || !phone || signaturePad.isEmpty()) {
            alert("è«‹å¡«å¯«å®Œæ•´è³‡æ–™ä¸¦ç°½åå”·ï¼ğŸ¾");
            return;
        }

        document.getElementById('loading').style.display = 'flex';
        
        const data = {
            owner: owner,
            pet: pet,
            phone: phone,
            signature: signaturePad.toDataURL()
        };

        fetch(scriptURL, {
            method: 'POST',
            mode: 'no-cors',
            cache: 'no-cache',
            body: JSON.stringify(data)
        })
        .then(() => {
            document.getElementById('loading').style.display = 'none';
            alert("ğŸ‰ é€å‡ºæˆåŠŸï¼æœŸå¾…è¦‹åˆ°ä¸»äººè·Ÿå¯¶è²ï¼");
            signaturePad.clear();
            document.getElementById('owner-name').value = '';
            document.getElementById('pet-name').value = '';
            document.getElementById('owner-phone').value = '';
        })
        .catch(error => {
            document.getElementById('loading').style.display = 'none';
            alert("å‚³é€å‡ºäº†ä¸€é»å°å•é¡Œï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚");
        });
    });
</script>
</body>
</html>
